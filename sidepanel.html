<!DOCTYPE html>
<html>
  <head>
    <title>Screenshot Tool</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="title-area">
          <h1>Screenshot Tool</h1>
          <p>Take screenshots of your browser and view them here</p>
        </div>
        <div class="header-icon-buttons">
          <button id="historyToggleBtn" class="icon-btn" title="View History">
            üìã
          </button>
          <button id="settingsToggleBtn" class="icon-btn" title="Settings">
            ‚öôÔ∏è
          </button>
        </div>
      </div>

      <!-- Main content section that will be hidden when history is open -->
      <div class="main-content" id="mainContent">
        <div class="button-group">
          <button id="takeScreenshotBtn" class="screenshot-btn">
            Full Page Screenshot
          </button>
          <button id="selectAreaBtn" class="screenshot-btn">Select Area</button>
        </div>

        <div class="preview-area" id="previewArea">
          <p class="preview-text">Screenshot preview will appear here</p>
        </div>

        <div
          class="response-container"
          id="responseContainer"
          style="display: block"
        >
          <!-- Response messages will be inserted here dynamically -->
        </div>
      </div>

      <!-- History Panel (Hidden by default) -->
      <div id="historyPanel" class="history-panel">
        <h2>Screenshot History</h2>
        <div class="history-list" id="historyList">
          <!-- History items will be populated here -->
          <p class="empty-history-message">
            No history items yet. Take a screenshot to get started!
          </p>
        </div>
      </div>

      <div class="action-buttons">
        <button id="sendToGeminiBtn" class="action-btn" disabled>
          Send to Gemini AI
        </button>
      </div>

      <!-- Settings Menu (Hidden by default) -->
      <div id="settingsMenu" class="settings-menu">
        <!-- Custom Instructions Section -->
        <div class="settings-panel">
          <h2>Custom Instructions</h2>
          <div class="input-group">
            <label for="customInstruction">Instructions for Gemini:</label>
            <textarea
              id="customInstruction"
              placeholder="What would you like Gemini to do with the screenshot? (e.g., 'Describe what's in this image' or 'Answer the question in the screenshot')"
              rows="4"
            ></textarea>
            <button id="saveCustomInstruction" class="save-btn">Save</button>
          </div>
          <p class="note">
            Customize how Gemini analyzes your screenshots. Default: "What's in
            this image? Please describe it in detail."
          </p>
        </div>

        <!-- Delimiter between sections -->
        <hr class="section-divider" />

        <!-- API Key Settings Section -->
        <div class="settings-panel">
          <h2>API Settings</h2>
          <div class="input-group">
            <label for="apiKey">Gemini API Key:</label>
            <div class="password-container">
              <input
                type="password"
                id="apiKey"
                placeholder="Enter your Gemini API key"
              />
              <button
                id="toggleApiKeyBtn"
                class="toggle-password-btn"
                title="Show API Key"
              >
                üëÅÔ∏è
              </button>
            </div>
            <button id="saveApiKey" class="save-btn">Save</button>
          </div>
          <p class="note">
            Your API key is stored locally and is never sent to our servers.
          </p>
          <p class="note">
            Get a key at:
            <a href="https://aistudio.google.com/app/apikey" target="_blank"
              >Google AI Studio</a
            >
          </p>
        </div>
      </div>
    </div>

    <div id="selectionOverlay" class="selection-overlay"></div>

    <script src="sidepanel.js"></script>
  </body>
</html>
